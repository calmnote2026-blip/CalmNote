<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chat AI</title>
<style>
body { background:#f3f0ff; font-family:Segoe UI; margin:0; display:flex; flex-direction:column; height:100vh;}
.chat { flex:1; padding:20px; overflow:auto;}
.msg { margin:10px 0; padding:10px 15px; border-radius:15px; max-width:70%;}
.ai { background:#6a5acd; color:white;}
.user { background:white; align-self:flex-end;}
.input { display:flex; padding:15px; background:white;}
input { flex:1; padding:10px; border-radius:10px; border:1px solid #ddd;}
button { margin-left:10px; padding:10px 15px; border:none; border-radius:10px; background:#6a5acd; color:white;}
</style>
</head>
<body>

<div class="chat" id="chatBox">
<div class="msg ai">Chào {{ user }}, mình ở đây để lắng nghe bạn.</div>
</div>

<div class="input">
<input id="msg">
<button onclick="send()">Gửi</button>
</div>

<script>
function send(){
let msg=document.getElementById("msg").value;
if(!msg) return;
let box=document.getElementById("chatBox");
box.innerHTML+=`<div class="msg user">${msg}</div>`;
fetch("/chat",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({message:msg})
})
.then(r=>r.json())
.then(data=>{
box.innerHTML+=`<div class="msg ai">${data.reply}</div>`;
box.scrollTop=box.scrollHeight;
});
document.getElementById("msg").value="";
}
</script>

</body>
</html>
