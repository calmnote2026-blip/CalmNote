<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CalmNote - GÃ³c RiÃªng TÆ°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root { --main-purple: #6a5acd; --soft-blue: #a2d2ff; }
        body { background: #f0f4f8; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; }
        .nav { background: white; width: 100%; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .nav a { margin: 0 15px; text-decoration: none; color: var(--main-purple); font-weight: bold; font-size: 14px; transition: 0.3s; }
        .nav a:hover { color: var(--soft-blue); }
        
        .main-card { background: white; margin: 40px auto; padding: 40px; border-radius: 30px; width: 90%; max-width: 550px; box-shadow: 0 15px 40px rgba(0,0,0,0.05); text-align: center; }
        textarea { width: 100%; height: 180px; border-radius: 20px; border: 1px solid #f0f0f0; background: #fafafa; padding: 20px; box-sizing: border-box; font-size: 16px; outline: none; transition: 0.3s; resize: none; }
        textarea:focus { border-color: var(--soft-blue); background: white; }
        
        .mood-box { display: flex; justify-content: space-around; margin: 25px 0; background: #fcfaff; padding: 15px; border-radius: 20px; }
        .mood-btn { font-size: 32px; cursor: pointer; filter: grayscale(100%); transition: 0.4s; }
        .mood-btn:hover, .mood-btn.active { filter: grayscale(0%); transform: scale(1.3) rotate(10deg); }
        
        .btn-submit { background: linear-gradient(135deg, var(--soft-blue), var(--main-purple)); color: white; border: none; padding: 16px; border-radius: 18px; width: 100%; font-weight: bold; font-size: 16px; cursor: pointer; box-shadow: 0 5px 15px rgba(106, 90, 205, 0.3); transition: 0.3s; }
        .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(106, 90, 205, 0.4); }
        
        .ai-feedback { background: #f4f0ff; color: #4b3d8e; padding: 25px; border-radius: 20px; margin-bottom: 25px; line-height: 1.7; border-left: 6px solid var(--main-purple); text-align: left; position: relative; }
        .ai-feedback::before { content: "AI Äá»™ng ViÃªn:"; font-weight: bold; display: block; margin-bottom: 8px; font-size: 12px; color: var(--main-purple); text-transform: uppercase; }
    </style>
</head>
<body class="animate__animated animate__fadeIn">
    <div class="nav animate__animated animate__slideInDown">
        <a href="/">ğŸ“ VIáº¾T NHáº¬T KÃ</a>
        <a href="/dashboard">ğŸ“Š BIá»‚U Äá»’ TÃ‚M TRáº NG</a>
        <a href="/ai-chat">ğŸ’¬ TÃ‚M Sá»° Vá»šI AI</a>
        <a href="/logout" style="color: #ff7675;">ğŸšª THOÃT</a>
    </div>

    <div class="main-card animate__animated animate__zoomIn">
        <h2 style="color: #333;">ChÃ o {{ user }},</h2>
        <p style="color: #888; font-size: 14px;">HÃ´m nay lÃ  má»™t trang giáº¥y má»›i, hÃ£y viáº¿t xuá»‘ng nhá»¯ng gÃ¬ báº¡n nghÄ© nhÃ©...</p>

        {% if feedback %}
        <div class="ai-feedback animate__animated animate__fadeInUp">
            {{ feedback }}
        </div>
        {% endif %}

        <form action="/save" method="post" id="noteForm">
            <textarea name="content" id="diaryContent" placeholder="Ghi láº¡i nháº­t kÃ½ cá»§a báº¡n á»Ÿ Ä‘Ã¢y..." required></textarea>
            
            <p style="font-weight: bold; margin-top: 25px; color: #555;">TÃ¢m tráº¡ng báº¡n lÃºc nÃ y?</p>
            <div class="mood-box">
                <span class="mood-btn" onclick="selectMood(1, this)" title="Ráº¥t tá»‡">ğŸ˜«</span>
                <span class="mood-btn" onclick="selectMood(2, this)" title="HÆ¡i buá»“n">ğŸ˜”</span>
                <span class="mood-btn active" onclick="selectMood(3, this)" style="filter: grayscale(0%);" title="BÃ¬nh thÆ°á»ng">ğŸ˜</span>
                <span class="mood-btn" onclick="selectMood(4, this)" title="KhÃ¡ tá»‘t">ğŸ˜Š</span>
                <span class="mood-btn" onclick="selectMood(5, this)" title="Tuyá»‡t vá»i">ğŸ¤©</span>
            </div>
            <input type="hidden" name="mood" id="moodInput" value="3">
            
            <button type="submit" class="btn-submit">LÆ¯U Láº I VÃ€ Láº®NG NGHE AI</button>
        </form>
    </div>

    <script>
        function selectMood(val, element) {
            document.getElementById('moodInput').value = val;
            let btns = document.querySelectorAll('.mood-btn');
            btns.forEach(b => b.classList.remove('active'));
            btns.forEach(b => b.style.filter = "grayscale(100%)");
            element.classList.add('active');
            element.style.filter = "grayscale(0%)";
        }
    </script>
</body>
</html>
